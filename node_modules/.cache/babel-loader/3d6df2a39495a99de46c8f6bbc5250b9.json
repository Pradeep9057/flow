{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\pc\\\\Desktop\\\\flow3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\flow3\\\\src\\\\WalletCard.js\";\n// https://docs.metamask.io/guide/ethereum-provider.html#using-the-provider\nimport React, { useState } from 'react';\nimport { ethers } from 'ethers';\nimport \"./WalletCard.css\";\nimport { useNavigate, NavLink } from 'react-router-dom';\nvar WalletCard = function WalletCard(props) {\n  var navigate = useNavigate();\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    errorMessage = _useState2[0],\n    setErrorMessage = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    defaultAccount = _useState4[0],\n    setDefaultAccount = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    userBalance = _useState6[0],\n    setUserBalance = _useState6[1];\n  var _useState7 = useState('Connect Wallet'),\n    _useState8 = _slicedToArray(_useState7, 2),\n    connButtonText = _useState8[0],\n    setConnButtonText = _useState8[1];\n  var connectWalletHandler = function connectWalletHandler() {\n    if (window.ethereum && window.ethereum.isMetaMask) {\n      console.log('MetaMask Here!');\n      window.ethereum.request({\n        method: 'eth_requestAccounts'\n      }).then(function (result) {\n        accountChangedHandler(result[0]);\n        setConnButtonText('Wallet Connected');\n        getAccountBalance(result[0]);\n      }).catch(function (error) {\n        setErrorMessage(error.message);\n      });\n    } else {\n      console.log('Need to install MetaMask');\n      setErrorMessage('Please install MetaMask browser extension to interact');\n    }\n    if (defaultAccount) {\n      navigate(\"/\");\n    }\n    ;\n  };\n\n  // update account, will cause component re-render\n  var accountChangedHandler = function accountChangedHandler(newAccount) {\n    setDefaultAccount(newAccount);\n    getAccountBalance(newAccount.toString());\n  };\n  var getAccountBalance = function getAccountBalance(account) {\n    window.ethereum.request({\n      method: 'eth_getBalance',\n      params: [account, 'latest']\n    }).then(function (balance) {\n      setUserBalance(ethers.utils.formatEther(balance));\n    }).catch(function (error) {\n      setErrorMessage(error.message);\n    });\n  };\n  var chainChangedHandler = function chainChangedHandler() {\n    // reload the page to avoid any errors with chain change mid use of application\n    window.location.reload();\n  };\n\n  // listen for account changes\n  window.ethereum.on('accountsChanged', accountChangedHandler);\n  window.ethereum.on('chainChanged', chainChangedHandler);\n  if (userBalance) {\n    // props.onSubmit(defaultAccount);\n    props.onSubmit(userBalance);\n    navigate(\"/\");\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainInside\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"walletCard iteams\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"items\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, \" \", \"Connection to MetaMask using window.ethereum methods\", \" \"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"items button\",\n    onClick: connectWalletHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, connButtonText), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"accountDisplay items\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"balanceDisplay items\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }), errorMessage)));\n};\nexport default WalletCard;","map":{"version":3,"names":["React","useState","ethers","useNavigate","NavLink","WalletCard","props","navigate","_useState","_useState2","_slicedToArray","errorMessage","setErrorMessage","_useState3","_useState4","defaultAccount","setDefaultAccount","_useState5","_useState6","userBalance","setUserBalance","_useState7","_useState8","connButtonText","setConnButtonText","connectWalletHandler","window","ethereum","isMetaMask","console","log","request","method","then","result","accountChangedHandler","getAccountBalance","catch","error","message","newAccount","toString","account","params","balance","utils","formatEther","chainChangedHandler","location","reload","on","onSubmit","createElement","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick"],"sources":["C:/Users/pc/Desktop/flow3/src/WalletCard.js"],"sourcesContent":["// https://docs.metamask.io/guide/ethereum-provider.html#using-the-provider\r\nimport React, { useState } from 'react'\r\nimport { ethers } from 'ethers'\r\nimport \"./WalletCard.css\"\r\nimport { useNavigate, NavLink } from 'react-router-dom';\r\n\r\nconst WalletCard = (props) => {\r\n    const navigate = useNavigate();\r\n    const [errorMessage, setErrorMessage] = useState(null);\r\n    const [defaultAccount, setDefaultAccount] = useState(null);\r\n    const [userBalance, setUserBalance] = useState(null);\r\n    const [connButtonText, setConnButtonText] = useState('Connect Wallet');\r\n\r\n    const connectWalletHandler = () => {\r\n        if (window.ethereum && window.ethereum.isMetaMask) {\r\n            console.log('MetaMask Here!');\r\n\r\n            window.ethereum.request({ method: 'eth_requestAccounts' })\r\n                .then(result => {\r\n                    accountChangedHandler(result[0]);\r\n                    setConnButtonText('Wallet Connected');\r\n                    getAccountBalance(result[0]);\r\n                })\r\n                .catch(error => {\r\n                    setErrorMessage(error.message);\r\n\r\n                });\r\n\r\n        } else {\r\n            console.log('Need to install MetaMask');\r\n            setErrorMessage('Please install MetaMask browser extension to interact');\r\n        }\r\n        if (defaultAccount) { navigate(\"/\") };\r\n\r\n    }\r\n\r\n    // update account, will cause component re-render\r\n    const accountChangedHandler = (newAccount) => {\r\n        setDefaultAccount(newAccount);\r\n        getAccountBalance(newAccount.toString());\r\n    }\r\n\r\n    const getAccountBalance = (account) => {\r\n        window.ethereum.request({ method: 'eth_getBalance', params: [account, 'latest'] })\r\n            .then(balance => {\r\n                setUserBalance(ethers.utils.formatEther(balance));\r\n            })\r\n            .catch(error => {\r\n                setErrorMessage(error.message);\r\n            });\r\n    };\r\n\r\n    const chainChangedHandler = () => {\r\n        // reload the page to avoid any errors with chain change mid use of application\r\n        window.location.reload();\r\n    }\r\n\r\n\r\n    // listen for account changes\r\n    window.ethereum.on('accountsChanged', accountChangedHandler);\r\n\r\n    window.ethereum.on('chainChanged', chainChangedHandler);\r\n\r\n    if (userBalance) {\r\n        // props.onSubmit(defaultAccount);\r\n        props.onSubmit(userBalance);\r\n        navigate(\"/\");\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"main\">\r\n            <div className=\"mainInside\">\r\n            <div className='walletCard iteams'>\r\n                <h4 className='items'> {\"Connection to MetaMask using window.ethereum methods\"} </h4>\r\n                <button className='items button' onClick={connectWalletHandler}>{connButtonText}</button>\r\n\r\n                <div className='accountDisplay items'>\r\n                    {/* <h3>Address: {defaultAccount}</h3> */}\r\n                    {/* {console.log(defaultAccount)} */}\r\n                </div>\r\n                <div className='balanceDisplay items'>\r\n                    {/* <h3>Balance: {userBalance}</h3> */}\r\n                </div>\r\n                {errorMessage}\r\n                </div>\r\n                </div>\r\n        </div>\r\n\t);\r\n}\r\nexport default WalletCard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}